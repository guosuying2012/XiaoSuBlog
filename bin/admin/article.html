{=./admin/public/header.html}

<div class="container">
  <div class="row">
    <div class="col-12">
      <div class="c-table-responsive@wide">
        <table class="c-table" style="margin-bottom: 170px">
          <thead class="c-table__head">
            <tr class="c-table__row">
              <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">ID</th>
              <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">标题/作者</th>
              <!-- <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">浏览量</th> -->
              <!-- <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">评论量</th> -->
              <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">分类</th>
              <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">发表时间</th>
              <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">最后修改时间</th>
              <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">审核状态</th>
              <th class="c-table__cell c-table__cell--head" style="font-weight:bold;">操作</th>
            </tr>
          </thead>

          <tbody>
            {#article_list}
            <tr class="c-table__row">
              <td class="c-table__cell">{$article_id}</td>
              <td class="c-table__cell">
                <div class="o-media">
                  <div class="o-media__body">
                    <h6><a href="/single.html?single={$article_id}" target="_blank" title="{$article_title}" style="color: #000000">{$article_title}</a></h6>
                    <p>{$article_author}</p>
                  </div>
                </div>
              </td>
              <!-- <td class="c-table__cell">{$article_views}</td> -->
              <!-- <td class="c-table__cell">{$article_comment}</td> -->
              <td class="c-table__cell">{$article_sort}</td>
              <td class="c-table__cell">{$article_data}</td>
              <td class="c-table__cell">{$article_last_data}</td>
              <td class="c-table__cell"><i style="color: {$color};" class="feather" data-feather="{$article_status}"></i></td>
              <td class="c-table__cell">
                <div class="c-dropdown dropdown">
                  <a href="/xiaosu/admin/article_edit/{$article_id}" class="c-btn c-btn--small c-btn--info" title="编辑">
                    <i class="feather" data-feather="edit-3"></i>
                  </a>
                  <a href="/xiaosu/admin/article_verify/{$article_id}" class="c-btn c-btn--small c-btn--warning" title="审核">
                    <i class="feather" data-feather="meh"></i>
                  </a>
                  <a onclick="dialog({$article_id})" class="c-btn c-btn--small c-btn--danger" title="删除">
                    <i class="feather" data-feather="trash"></i>
                  </a>
                </div>
              </td>
            </tr>
            {/article_list}
          </tbody>
        </table>
        
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="modal" class="modal">
  <div class="modal-content">
    <header class="modal-header">
      <h4>确定要删除这条博文吗？</h4>
      <span class="close">×</span>
    </header>
    <div class="modal-body">
      <p style="text-align: center;">此操作将不可撤销，确定要删除此博文吗？</p>
    </div>
    <footer class="modal-footer">
      <button class="c-btn c-btn--danger u-mb-xsmall" id="cancel">取消</button>
      <button class="c-btn c-btn--info u-mb-xsmall" id="sure">确定</button>
    </footer>
  </div>
</div>

<script type="text/javascript">
  function dialog(id) 
  {
    var close = document.getElementsByClassName('close')[0];
    var cancel = document.getElementById('cancel');
    var sure = document.getElementById('sure');
    var modal = document.getElementById('modal');
    
    modal.style.display = "block";
    close.addEventListener('click', function()
    {
        modal.style.display = "none";
    });

    cancel.addEventListener('click', function()
    {
        modal.style.display = "none";
    });

    sure.addEventListener('click', function() 
    {
      modal.style.display = "none";
      window.location.href = "/xiaosu/admin/article_delete/"+id+"";
    });
  }
</script>

{=./admin/public/footer.html}