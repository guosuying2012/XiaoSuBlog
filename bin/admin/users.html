{=./admin/public/header.html}
<div class="container">

  <div class="row">
    <div class="col-12">
      <div class="c-table-responsive@wide">
        <table class="c-table" style="margin-bottom: 170px">
          <thead class="c-table__head">
            <tr class="c-table__row">
              <th class="c-table__cell c-table__cell--head">ID</th>
              <th class="c-table__cell c-table__cell--head">IP</th>
              <th class="c-table__cell c-table__cell--head">用户名</th>
              <th class="c-table__cell c-table__cell--head">注册时间</th>
              <th class="c-table__cell c-table__cell--head">签名</th>
              <th class="c-table__cell c-table__cell--head">账户状态</th>
              <th class="c-table__cell c-table__cell--head">管理</th>
            </tr>
          </thead>

          <tbody>
            {#user_list}
            <tr class="c-table__row">
              <td class="c-table__cell">{$user_id}</td>
              <td class="c-table__cell">{$user_ip}</td>
              <td class="c-table__cell">
                <div class="o-media">
                  <div class="o-media__img u-mr-xsmall">
                    <div class="c-avatar c-avatar--small">
                      <img class="c-avatar__img" src="http://via.placeholder.com/72" alt="Jessica Alba">
                    </div>
                  </div>
                  <div class="o-media__body">
                    <h6>{$user_nikename}</h6>
                    <p>{$user_username}</p>
                  </div>
                </div>
              </td>
              <td class="c-table__cell">{$user_regtime}</td>
              <th class="c-table__cell">{$user_signature}</th>
              <td class="c-table__cell">
                <i style="color: {$color};" class="feather" data-feather="{$user_status}"></i>
              </td>
              <td class="c-table__cell">
                <div class="c-dropdown dropdown">
                  <a href="#{$user_id}" class="c-btn c-btn--small c-btn--info" title="编辑">
                    <i class="feather" data-feather="edit-3"></i>
                  </a>
                  <a onclick="dialog({$user_id})" class="c-btn c-btn--small c-btn--danger" title="禁用">
                    <i class="feather" data-feather="slash"></i>
                  </a>
                </div>
              </td>
            </tr>
            {/user_list}
          </tbody>
        </table>
        
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="modal" class="modal">
  <div class="modal-content">
    <header class="modal-header">
      <h4>确定要更改此账户的禁用状态？</h4>
      <span class="close">×</span>
    </header>
    <div class="modal-body">
      <p style="text-align: center;">禁用状态后此账户将不能正常使用博客功能，解除禁用将恢复账户的使用。</p>
    </div>
    <footer class="modal-footer">
      <button class="c-btn c-btn--danger u-mb-xsmall" id="cancel">取消</button>
      <button class="c-btn c-btn--info u-mb-xsmall" id="sure">确定</button>
    </footer>
  </div>
</div>

<script type="text/javascript">
  function dialog(id) 
  {
    var close = document.getElementsByClassName('close')[0];
    var cancel = document.getElementById('cancel');
    var sure = document.getElementById('sure');
    var modal = document.getElementById('modal');
    
    modal.style.display = "block";
    close.addEventListener('click', function()
    {
        modal.style.display = "none";
    });

    cancel.addEventListener('click', function()
    {
        modal.style.display = "none";
    });

    sure.addEventListener('click', function() 
    {
      modal.style.display = "none";
      window.location.href = "/xiaosu/admin/user_disable/"+id+"";
    });
  }
</script>

{=./admin/public/footer.html}
